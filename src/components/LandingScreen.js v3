import React, { useState, useEffect } from "react";
import "./LandingScreen.css";

function calculateDuration(fromDate) {
  const from = new Date(fromDate);
  const now = new Date();
  let diff = now - from;
  const seconds = Math.floor((diff / 1000) % 60);
  const minutes = Math.floor((diff / (1000 * 60)) % 60);
  const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
  const days = Math.floor(diff / (1000 * 60 * 60 * 24));
  const months = Math.floor(days / 30.4375);
  const years = Math.floor(months / 12);
  const monthsDisplay = months % 12;
  return {
    years,
    months: monthsDisplay,
    days: days % 30,
    hours,
    minutes,
    seconds,
    totalDays: days,
    allMonths: months + years * 12,
  };
}

export default function LandingScreen() {
  const startDate = "2023-05-12T00:00:00Z";
  const [duration, setDuration] = useState(calculateDuration(startDate));

  useEffect(() => {
    const interval = setInterval(() => setDuration(calculateDuration(startDate)), 1000);
    return () => clearInterval(interval);
  }, []);

  return (
    <div className="landing">
      <div className="main-date">
        {`${duration.totalDays} يوم | ${duration.allMonths} شهر | ${duration.years} سنة – و`}
      </div>
      <div className="live-timer">
        {`${String(duration.days).padStart(2, "0")} يوم، ${String(
          duration.hours
        ).padStart(2, "0")} ساعة، ${String(duration.minutes).padStart(
          2,
          "0"
        )} دقيقة، ${String(duration.seconds).padStart(2, "0")} ثانية`}
      </div>
      <div className="love-text">سنتين و لسه كل يوم بحبك أكتر</div>
      <div className="down-arrow">
        <span aria-label="Scroll Down" className="arrow-animated">
          &#8595;
        </span>
      </div>
    </div>
  );
}
